# TR

## 重启： [左开关置`上`] [右开关置`上`]

> 长时间处于该模式，会导致机器一直被重启

## 普通模式(速度2M/S)： [左开关置`中`] [右开关置`中`]

> 该模式下，只支持遥控器控制

## 缓慢模式(速度0.4M/S)： [左开关置`中`] [右开关置`下`]

> 该模式下，支持遥控器控制、上位机控制、程序控制

- 向上位机发送 `a\n`： [左摇杆] [$\uparrow$]

- 清除上位机发送数据： [左摇杆] [$\downarrow$]

- 向上位机发送 `b\n`： [旋转] [顺]

> 上位机托管射箭，射箭流程参考取箭模式下的射箭流程

- 向上位机发送 `c\n`： [旋转] [逆]

> 上位机托管射箭，射箭流程参考取箭模式下的射箭流程

## 取箭模式：[左开关置`下`] [右开关置`下`]

> 该模式下，支持上位机控制、程序控制

- 开始取箭： [旋转] [顺]

> 夹箭装置抬起箭时，机器向后移动，请注意安全！

> 请注意有时候继电器会跳变保护，导致箭全部掉在地上！

- 射箭（60°）： [旋转] [逆]

> 1 2 3 4 5 <br>
> 射箭顺序：2、3、4、1、5 <br>
> ~~射`1`时，机器会向右移~~ <br>
> ~~射`5`时，机器会向左移~~

> 当中间的射箭装置在取箭时，执行该操作会射两侧的箭 <br>
> 当中间的射箭装置插入箭尾时，执行该操作会射中间的箭（优先级：中间>左侧>右侧）

> 请勿连续执行该操作，否者会出现未修正的BUG

## 遥控器控制

- X轴平移： [右摇杆] [$\leftarrow$ $\rightarrow$]

- Y轴平移： [右摇杆] [$\uparrow$ $\downarrow$]

- Z轴旋转： [左摇杆] [$\leftarrow$ $\rightarrow$]

## 上位机控制

### 生产协议：`[A-Z]:[float->4byte][float->4byte][float->4byte]`

- `[A-Z]`：一个大写字母
- `:`：英文冒号
- `[float->4byte]`：单精度浮点数的4个字节，小端模式（高位高存，低位低存）

重启（`Z`）：

1. 0
2. 0
3. 0

速度控制（`V`）：

1. `x`轴的速度，左右移动，右为正，`m/s`
2. `y`轴的速度，前后移动，前为正，`m/s`
3. `z`轴的角速度，旋转，逆时针为正，`rad/s`

绝对位置控制（`P`）：

1. `x`轴的位移，右为正，`m`
2. `y`轴的位移，前为正，`m`
3. `z`轴的角度，逆时针为正，`rad`

射箭控制（`D`）：

1. 射箭的角度，`°`
2. 0
3. 0

### 调试协议：`[a-z]:[float->string],[float->string],[float->string]`

- `[A-Z]`：一个小写字母
- `:`：英文冒号
- `[float->string]`：单精度浮点数转换成字符串，例如 `v:0,-0.5,0`

重启（`z`）：

1. 0
2. 0
3. 0

速度控制（`v`）：

1. `x`轴的速度，左右移动，右为正，`m/s`
2. `y`轴的速度，前后移动，前为正，`m/s`
3. `z`轴的角速度，旋转，逆时针为正，`rad/s`

绝对位置控制（`p`）：

1. `x`轴的位移，右为正，`m`
2. `y`轴的位移，前为正，`m`
3. `z`轴的角度，逆时针为正，`rad`

舵机角度（`a`）：

> 1500 / 20000 = 1.5 ms

1. 选择舵机

- 0 夹箭装置角度
- 1 左边射箭装置角度
- 2 中间射箭装置角度
- 3 右边射箭装置角度

2. 俯仰舵机的角度（夹箭装置的角度、射箭角度）
3. 移动舵机的角度

步进电机（`h`）：

1. 相对位置控制
2. 绝对位置控制（正整数）
3. 0

射箭（`j`）：

1. 射左侧的箭，角度`°`
2. 射中间的箭，角度`°`
3. 射右侧的箭，角度`°`

继电器（`r`）：

1. `1` 接通最两侧和中间，`3` 断开最两侧和中间，`-1` 断开最两侧，`0` 断开中间
2. `1` 接通左侧，`0` 断开左侧
3. `1` 接通右侧，`0` 断开右侧

测试任务（`t`）：

1. 选择任务

- `1` 开始取箭任务

> t:1,0,0

- `2` 开始射箭任务，需要跟随一个角度参数

> t:2,60,0

### 程序控制

- 取箭时，机器会右向后移动的动作。
